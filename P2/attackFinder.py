import collections
import itertools
import sys

dates = [ "2016-04-28 16:57:31.708",
 "2016-05-01 08:35:32.7",
 "2016-05-01 08:36:32.973",
 "2016-05-01 13:21:12.337",
 "2016-05-03 22:20:56.665",
 "2016-05-03 22:21:56.871",
 "2016-05-03 22:23:00.534",
 "2016-05-03 22:25:01.285",
 "2016-05-03 22:26:00.633",
 "2016-05-08 07:07:14.986",
 "2016-05-08 07:08:15.123",
 "2016-05-08 07:09:15.094",
 "2016-05-08 07:10:15.158",
 "2016-05-08 07:11:15.515",
 "2016-05-08 08:07:01.121",
 "2016-05-08 08:23:30.101",
 "2016-05-08 08:50:36.551",
 "2016-05-12 01:33:50.7",
 "2016-05-12 21:44:57.531",
 "2016-05-14 22:11:36.939",
 "2016-05-15 08:42:04.785",
 "2016-05-15 08:43:05.01",
 "2016-05-15 16:59:21.033",
 "2016-05-16 20:40:39.195",
 "2016-05-16 20:54:44.609",
 "2016-05-16 20:55:44.36",
 "2016-05-17 09:14:26.172",
 "2016-05-17 13:14:26.947",
 "2016-05-17 20:58:22.461",
 "2016-05-17 20:59:22.307",
 "2016-05-17 21:00:22.399",
 "2016-05-17 21:01:22.923",
 "2016-05-18 08:27:33.668",
 "2016-05-18 12:53:58.254",
 "2016-05-18 12:54:58.219",
 "2016-05-18 12:56:59.841",
 "2016-05-18 12:57:59.661",
 "2016-05-18 12:58:58.964"]

for date in dates:
    with open('T2.csv') as f:
        before = collections.deque(maxlen=10)
        for line in f:
                if date in line:
                    # f.writelines(str(before))
                    # f.write(str(line))
                    # f.writelines(str(itertools.islice(f, 10)))
                    sys.stdout.writelines(before)
                    sys.stdout.write(line)
                    sys.stdout.writelines(itertools.islice(f, 10))
                    break
                before.append(line)
